{"ast":null,"code":"import _regeneratorRuntime from\"/home/mrdubey/Advance-React-Training/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mrdubey/Advance-React-Training/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{Form,InputGroup}from\"react-bootstrap\";import Navbar from\"../navbar/Navbar\";import citydata from\"../../assets/indian.cities.json\";import styles from\"./Home.module.scss\";import{getSearchValue,setCityList,setCityName,setIsEmpty,setIsFound,setIsSearched,setSearch,setTemperature,setWeatherDescription,setWeatherIconId,setWeatherMain}from\"../../app/reducers/weatherreport/weatherReportSlice\";import{useAppSelector,useAppDispatch}from\"../../app/hook\";import axios from\"axios\";import Card from\"./Cards\";import Carusel from\"./Carusel\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var apiKey=\"019bbaf0caaa302418a19bbe6cb2ff84\";var isSearched=useAppSelector(function(state){return state.search.isSearched;});var isEmpty=useAppSelector(function(state){return state.search.isEmpty;});var caruselList=useAppSelector(function(state){return state.search.caruselList;});var isFound=useAppSelector(function(state){return state.search.isFound;});var _useAppSelector=useAppSelector(function(state){return state.search;}),curWeather=_useAppSelector.WeatherInfo;var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatcher(setIsSearched(true));_context.next=4;return axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(searchValue,\"&appid=\").concat(apiKey));case 4:res=_context.sent;_context.next=7;return res.data;case 7:data=_context.sent;dispatcher(setIsFound(true));console.log(data);dispatcher(setWeatherIconId(data.weather[0].icon));dispatcher(setWeatherDescription(data.weather[0].description));dispatcher(setWeatherMain(data.weather[0].main));dispatcher(setCityName(data.name));dispatcher(setTemperature(data.main.temp));_context.next=22;break;case 17:_context.prev=17;_context.t0=_context[\"catch\"](0);console.warn(_context.t0);dispatcher(setIsSearched(false));dispatcher(setIsFound(false));case 22:case\"end\":return _context.stop();}}},_callee,null,[[0,17]]);}));return function handleClick(){return _ref.apply(this,arguments);};}();var dispatcher=useAppDispatch();var cityList=useAppSelector(function(state){return state.search.cityList;});var searchValue=useAppSelector(getSearchValue);var handleChange=function handleChange(e){dispatcher(setSearch(e.target.value));};var getCityList=function getCityList(data){var list=data.map(function(item){return item.name;});dispatcher(setCityList(list));};useEffect(function(){getCityList(citydata);if(caruselList.length>0){dispatcher(setIsEmpty(false));}else{dispatcher(setIsEmpty(true));}},[]);useEffect(function(){if(searchValue===\"\"){dispatcher(setIsSearched(false));dispatcher(setIsFound(false));}if(caruselList.length>0){dispatcher(setIsEmpty(false));}else{dispatcher(setIsEmpty(true));}},[searchValue,useAppDispatch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsxs(\"section\",{className:styles.search_wrap,children:[/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-2 \".concat(styles.input_grp),children:[/*#__PURE__*/_jsx(Form.Control,{type:\"text\",name:\"search\",value:searchValue,onChange:handleChange,placeholder:\"Search Loaction\",className:styles.input}),/*#__PURE__*/_jsx(InputGroup.Text,{className:styles.search_logo,id:\"basic-addon2\",children:/*#__PURE__*/_jsx(\"button\",{className:styles.search_btn,onClick:handleClick,children:\"go\"})})]}),searchValue.length>0&&/*#__PURE__*/_jsx(\"div\",{className:styles.suggestions,children:cityList.filter(function(name){return name.toLocaleLowerCase().includes(searchValue);}).map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.box,onClick:function onClick(){return dispatcher(setSearch(item));},children:item},index);}).slice(0,5)})]}),isSearched&&isFound===true&&/*#__PURE__*/_jsx(\"section\",{className:styles.weather_card,children:/*#__PURE__*/_jsx(Card,{iconID:curWeather.weather[0].icon,weatherMain:curWeather.weather[0].main,weatherDescription:curWeather.weather[0].description,city:curWeather.name,temp:curWeather.main.temp})}),!isEmpty&&!isSearched&&!isFound===true&&/*#__PURE__*/_jsx(\"section\",{className:styles.sec_carousel,children:/*#__PURE__*/_jsx(Carusel,{caruselList:caruselList})})]})]});};export default Home;","map":{"version":3,"names":["React","useEffect","Form","InputGroup","Navbar","citydata","styles","getSearchValue","setCityList","setCityName","setIsEmpty","setIsFound","setIsSearched","setSearch","setTemperature","setWeatherDescription","setWeatherIconId","setWeatherMain","useAppSelector","useAppDispatch","axios","Card","Carusel","Home","apiKey","isSearched","state","search","isEmpty","caruselList","isFound","curWeather","WeatherInfo","handleClick","dispatcher","get","searchValue","res","data","console","log","weather","icon","description","main","name","temp","warn","cityList","handleChange","e","target","value","getCityList","list","map","item","length","container","search_wrap","input_grp","input","search_logo","search_btn","suggestions","filter","toLocaleLowerCase","includes","index","box","slice","weather_card","sec_carousel"],"sources":["/home/mrdubey/Advance-React-Training/src/Components/home/Home.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Form, InputGroup } from \"react-bootstrap\";\nimport Navbar from \"../navbar/Navbar\";\nimport citydata from \"../../assets/indian.cities.json\";\nimport styles from \"./Home.module.scss\";\nimport { WeatherInfo } from \"./WeatherInfo\";\nimport {getSearchValue,setCityList,setCityName,setIsAddToList,setIsEmpty,setIsFound,setIsSearched,setSearch,setTemperature,setWeatherDescription,setWeatherIconId,setWeatherMain,\n} from \"../../app/reducers/weatherreport/weatherReportSlice\";\nimport { useAppSelector, useAppDispatch } from \"../../app/hook\";\nimport axios from \"axios\";\nimport Card from \"./Cards\";\nimport Carusel from \"./Carusel\";\n\nconst Home = () => {\n  const apiKey = \"019bbaf0caaa302418a19bbe6cb2ff84\";\n  const isSearched = useAppSelector((state) => state.search.isSearched);\n  const isEmpty = useAppSelector((state) => state.search.isEmpty);\n  const caruselList = useAppSelector((state) => state.search.caruselList);\n  const isFound = useAppSelector((state) => state.search.isFound);\n  const { WeatherInfo: curWeather } = useAppSelector((state) => state.search);\n  const handleClick = async () => {\n    try {\n      dispatcher(setIsSearched(true));\n      let res = await axios.get(\n        `https://api.openweathermap.org/data/2.5/weather?q=${searchValue}&appid=${apiKey}`\n      );\n      const data: WeatherInfo = await res.data;\n      dispatcher(setIsFound(true));\n      console.log(data);\n      dispatcher(setWeatherIconId(data.weather[0].icon));\n      dispatcher(setWeatherDescription(data.weather[0].description));\n      dispatcher(setWeatherMain(data.weather[0].main));\n      dispatcher(setCityName(data.name));\n      dispatcher(setTemperature(data.main.temp));\n    } catch (error: any) {\n      console.warn(error);\n      dispatcher(setIsSearched(false));\n      dispatcher(setIsFound(false));\n    }\n  };\n\n  const dispatcher = useAppDispatch();\n  const cityList = useAppSelector((state) => state.search.cityList);\n  const searchValue = useAppSelector(getSearchValue);\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatcher(setSearch(e.target.value));\n  };\n  const getCityList = (data: any) => {\n    let list = data.map((item: any) => {\n      return item.name;\n    });\n\n    dispatcher(setCityList(list));\n  };\n\n  useEffect(() => {\n    getCityList(citydata);\n    if (caruselList.length > 0) {\n      dispatcher(setIsEmpty(false));\n    } else {\n      dispatcher(setIsEmpty(true));\n    }\n  }, []);\n\n  useEffect(() => {\n    if (searchValue === \"\") {\n      dispatcher(setIsSearched(false));\n      dispatcher(setIsFound(false));\n    }\n    if (caruselList.length > 0) {\n      dispatcher(setIsEmpty(false));\n    } else {\n      dispatcher(setIsEmpty(true));\n    }\n  }, [searchValue, useAppDispatch]);\n  return (\n    <>\n      <Navbar />\n      <div className={styles.container}>\n        <section className={styles.search_wrap}>\n          <InputGroup className={`mb-2 ${styles.input_grp}`}>\n            <Form.Control\n              type=\"text\"\n              name=\"search\"\n              value={searchValue}\n              onChange={handleChange}\n              placeholder=\"Search Loaction\"\n              className={styles.input}\n            />\n            <InputGroup.Text className={styles.search_logo} id=\"basic-addon2\">\n              <button className={styles.search_btn} onClick={handleClick}>\n                go\n              </button>\n            </InputGroup.Text>\n          </InputGroup>\n          {searchValue.length > 0 && (\n            <div className={styles.suggestions}>\n              {cityList\n                .filter((name: string) => {\n                  return name.toLocaleLowerCase().includes(searchValue);\n                })\n                .map((item: string, index: number) => {\n                  return (\n                    <div\n                      className={styles.box}\n                      key={index}\n                      onClick={() => dispatcher(setSearch(item))}\n                    >\n                      {item}\n                    </div>\n                  );\n                })\n                .slice(0, 5)}\n            </div>\n          )}\n        </section>\n        {isSearched && isFound === true && (\n          <section className={styles.weather_card}>\n            <Card\n              iconID={curWeather.weather[0].icon}\n              weatherMain={curWeather.weather[0].main}\n              weatherDescription={curWeather.weather[0].description}\n              city={curWeather.name}\n              temp={curWeather.main.temp}\n            />\n          </section>\n        )}\n        {!isEmpty && !isSearched && !isFound === true && (\n          <section className={styles.sec_carousel}>\n            <Carusel caruselList={caruselList} />\n          </section>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}