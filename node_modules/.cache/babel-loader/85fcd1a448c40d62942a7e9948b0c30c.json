{"ast":null,"code":"import _regeneratorRuntime from\"/home/mrdubey/Advance-React-Training/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/mrdubey/Advance-React-Training/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import React,{useEffect}from\"react\";import{Form,InputGroup}from\"react-bootstrap\";import Navbar from\"../navbar/Navbar\";import citydata from\"../../assets/indian.cities.json\";import styles from\"./Home.module.scss\";import{getSearchValue,setCityList,setCityName,setIsAddToList,setIsEmpty,setIsFound,setIsSearched,setSearch,setTemperature,setWeatherDescription,setWeatherIconId,setWeatherMain}from\"../../app/reducers/weatherreport/weatherReportSlice\";import{useAppSelector,useAppDispatch}from\"../../app/hook\";import axios from\"axios\";import Card from\"./Cards\";import Carusel from\"./Carusel\";import EmptyWhishlist from\"./EmptyWhishlist\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Home=function Home(){var apiKey=\"019bbaf0caaa302418a19bbe6cb2ff84\";var isSearched=useAppSelector(function(state){return state.search.isSearched;});var isEmpty=useAppSelector(function(state){return state.search.isEmpty;});var caruselList=useAppSelector(function(state){return state.search.caruselList;});var isFound=useAppSelector(function(state){return state.search.isFound;});var _useAppSelector=useAppSelector(function(state){return state.search;}),curWeather=_useAppSelector.WeatherInfo;var handleClick=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;dispatcher(setIsSearched(true));_context.next=4;return axios.get(\"https://api.openweathermap.org/data/2.5/weather?q=\".concat(searchValue,\"&appid=\").concat(apiKey));case 4:res=_context.sent;_context.next=7;return res.data;case 7:data=_context.sent;dispatcher(setIsFound(true));dispatcher(setIsAddToList(false));console.log(data);dispatcher(setWeatherIconId(data.weather[0].icon));dispatcher(setWeatherDescription(data.weather[0].description));dispatcher(setWeatherMain(data.weather[0].main));dispatcher(setCityName(data.name));dispatcher(setTemperature(data.main.temp));_context.next=23;break;case 18:_context.prev=18;_context.t0=_context[\"catch\"](0);console.warn(_context.t0);dispatcher(setIsSearched(false));dispatcher(setIsFound(false));case 23:case\"end\":return _context.stop();}}},_callee,null,[[0,18]]);}));return function handleClick(){return _ref.apply(this,arguments);};}();var dispatcher=useAppDispatch();var cityList=useAppSelector(function(state){return state.search.cityList;});var searchValue=useAppSelector(getSearchValue);var handleChange=function handleChange(e){dispatcher(setSearch(e.target.value));};var getCityList=function getCityList(data){var list=data.map(function(item){return item.name;});dispatcher(setCityList(list));};useEffect(function(){getCityList(citydata);if(caruselList.length>0){dispatcher(setIsEmpty(false));}else{dispatcher(setIsEmpty(true));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[]);useEffect(function(){if(searchValue===\"\"){dispatcher(setIsSearched(false));dispatcher(setIsFound(false));}if(caruselList.length>0){dispatcher(setIsEmpty(false));}else{dispatcher(setIsEmpty(true));}// eslint-disable-next-line react-hooks/exhaustive-deps\n},[searchValue,useAppDispatch]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{}),/*#__PURE__*/_jsxs(\"div\",{className:styles.container,\"data-testid\":\"home\",children:[/*#__PURE__*/_jsxs(\"div\",{className:styles.search_wrap,children:[/*#__PURE__*/_jsxs(InputGroup,{className:\"mb-2 \".concat(styles.input_grp),children:[/*#__PURE__*/_jsx(Form.Control,{\"data-testid\":\"search-bar\",type:\"text\",name:\"search\",autoComplete:\"off\",value:searchValue,onChange:handleChange,placeholder:\"Search Loaction\",className:styles.input}),/*#__PURE__*/_jsx(InputGroup.Text,{className:styles.search_logo,id:\"basic-addon2\",children:/*#__PURE__*/_jsx(\"button\",{className:styles.search_button,onClick:handleClick,\"data-testid\":\"search-btn\",children:\"go\"})})]}),searchValue.length>0&&/*#__PURE__*/_jsx(\"div\",{className:styles.suggestions,children:cityList.filter(function(name){return name.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase());}).map(function(item,index){return/*#__PURE__*/_jsx(\"div\",{className:styles.chip,onClick:function onClick(){return dispatcher(setSearch(item));},children:item},index);}).slice(0,5)})]}),isEmpty&&!isSearched&&!isFound===true&&/*#__PURE__*/_jsx(\"div\",{className:styles.empty_wishlist,children:/*#__PURE__*/_jsx(EmptyWhishlist,{})}),isSearched&&isFound===true&&/*#__PURE__*/_jsx(\"div\",{className:styles.weather_card,children:/*#__PURE__*/_jsx(Card,{iconID:curWeather.weather[0].icon,weatherMain:curWeather.weather[0].main,weatherDescription:curWeather.weather[0].description,city:curWeather.name,temp:curWeather.main.temp})}),!isEmpty&&!isSearched&&!isFound===true&&/*#__PURE__*/_jsx(\"div\",{className:styles.carousel,children:/*#__PURE__*/_jsx(Carusel,{caruselList:caruselList})})]})]});};export default Home;","map":{"version":3,"names":["React","useEffect","Form","InputGroup","Navbar","citydata","styles","getSearchValue","setCityList","setCityName","setIsAddToList","setIsEmpty","setIsFound","setIsSearched","setSearch","setTemperature","setWeatherDescription","setWeatherIconId","setWeatherMain","useAppSelector","useAppDispatch","axios","Card","Carusel","EmptyWhishlist","Home","apiKey","isSearched","state","search","isEmpty","caruselList","isFound","curWeather","WeatherInfo","handleClick","dispatcher","get","searchValue","res","data","console","log","weather","icon","description","main","name","temp","warn","cityList","handleChange","e","target","value","getCityList","list","map","item","length","container","search_wrap","input_grp","input","search_logo","search_button","suggestions","filter","toLocaleLowerCase","includes","index","chip","slice","empty_wishlist","weather_card","carousel"],"sources":["/home/mrdubey/Advance-React-Training/src/Components/home/Home.tsx"],"sourcesContent":["import React, { useEffect } from \"react\";\nimport { Form, InputGroup } from \"react-bootstrap\";\nimport Navbar from \"../navbar/Navbar\";\nimport citydata from \"../../assets/indian.cities.json\";\nimport styles from \"./Home.module.scss\";\nimport { WeatherInfo } from \"./WeatherInfo\";\nimport {getSearchValue,setCityList,setCityName,setIsAddToList,setIsEmpty,setIsFound,setIsSearched,setSearch,setTemperature,setWeatherDescription,setWeatherIconId,setWeatherMain,\n} from \"../../app/reducers/weatherreport/weatherReportSlice\";\nimport { useAppSelector, useAppDispatch } from \"../../app/hook\";\nimport axios from \"axios\";\nimport Card from \"./Cards\";\nimport Carusel from \"./Carusel\";\nimport EmptyWhishlist from \"./EmptyWhishlist\";\n\nconst Home = () => {\n  const apiKey = \"019bbaf0caaa302418a19bbe6cb2ff84\";\n  const isSearched = useAppSelector((state) => state.search.isSearched);\n  const isEmpty = useAppSelector((state) => state.search.isEmpty);\n  const caruselList = useAppSelector((state) => state.search.caruselList);\n  const isFound = useAppSelector((state) => state.search.isFound);\n  const { WeatherInfo: curWeather } = useAppSelector((state) => state.search);\n  const handleClick = async () => {\n    try {\n      dispatcher(setIsSearched(true));\n      let res = await axios.get(\n        `https://api.openweathermap.org/data/2.5/weather?q=${searchValue}&appid=${apiKey}`\n      );\n      const data: WeatherInfo = await res.data;\n      dispatcher(setIsFound(true));\n      dispatcher(setIsAddToList(false));\n      console.log(data);\n      dispatcher(setWeatherIconId(data.weather[0].icon));\n      dispatcher(setWeatherDescription(data.weather[0].description));\n      dispatcher(setWeatherMain(data.weather[0].main));\n      dispatcher(setCityName(data.name));\n      dispatcher(setTemperature(data.main.temp));\n    } catch (error: any) {\n      console.warn(error);\n      dispatcher(setIsSearched(false));\n      dispatcher(setIsFound(false));\n    }\n  };\n\n  const dispatcher = useAppDispatch();\n  const cityList = useAppSelector((state) => state.search.cityList);\n  const searchValue = useAppSelector(getSearchValue);\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    dispatcher(setSearch(e.target.value));\n  };\n  const getCityList = (data: any) => {\n    let list = data.map((item: any) => {\n      return item.name;\n    });\n\n    dispatcher(setCityList(list));\n  };\n\n  useEffect(() => {\n    getCityList(citydata);\n    if (caruselList.length > 0) {\n      dispatcher(setIsEmpty(false));\n    } else {\n      dispatcher(setIsEmpty(true));\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  useEffect(() => {\n    if (searchValue === \"\") {\n      dispatcher(setIsSearched(false));\n      dispatcher(setIsFound(false));\n    }\n    if (caruselList.length > 0) {\n      dispatcher(setIsEmpty(false));\n    } else {\n      dispatcher(setIsEmpty(true));\n    }\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [searchValue, useAppDispatch]);\n  return (\n    <>\n      <Navbar />\n      <div className={styles.container} data-testid=\"home\">\n        <div className={styles.search_wrap}>\n          <InputGroup className={`mb-2 ${styles.input_grp}`}>\n            <Form.Control\n              data-testid=\"search-bar\"\n              type=\"text\"\n              name=\"search\"\n              autoComplete=\"off\"\n              value={searchValue}\n              onChange={handleChange}\n              placeholder=\"Search Loaction\"\n              className={styles.input}\n            />\n            <InputGroup.Text className={styles.search_logo} id=\"basic-addon2\">\n              <button className={styles.search_button} onClick={handleClick} data-testid=\"search-btn\">\n                go\n              </button>\n            </InputGroup.Text>\n          </InputGroup>\n          {searchValue.length > 0 && (\n            <div className={styles.suggestions}>\n              {cityList\n                .filter((name: string) => {\n                  return name.toLocaleLowerCase().includes(searchValue.toLocaleLowerCase());\n                })\n                .map((item: string, index: number) => {\n                  return (\n                    <div\n                      className={styles.chip}\n                      key={index}\n                      onClick={() => dispatcher(setSearch(item))}\n                    >\n                      {item}\n                    </div>\n                  );\n                })\n                .slice(0, 5)}\n            </div>\n          )}\n        </div>\n        {isEmpty && !isSearched && !isFound === true && (\n          <div className={styles.empty_wishlist}>\n            <EmptyWhishlist />\n          </div>\n        )}\n        {isSearched && isFound === true && (\n          <div className={styles.weather_card}>\n            <Card\n              iconID={curWeather.weather[0].icon}\n              weatherMain={curWeather.weather[0].main}\n              weatherDescription={curWeather.weather[0].description}\n              city={curWeather.name}\n              temp={curWeather.main.temp}\n            />\n          </div>\n        )}\n        {!isEmpty && !isSearched && !isFound === true && (\n          <div className={styles.carousel}>\n            <Carusel caruselList={caruselList} />\n          </div>\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Home;\n"],"mappings":"oQAAA,MAAOA,MAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,CAAeC,UAAf,KAAiC,iBAAjC,CACA,MAAOC,OAAP,KAAmB,kBAAnB,CACA,MAAOC,SAAP,KAAqB,iCAArB,CACA,MAAOC,OAAP,KAAmB,oBAAnB,CAEA,OAAQC,cAAR,CAAuBC,WAAvB,CAAmCC,WAAnC,CAA+CC,cAA/C,CAA8DC,UAA9D,CAAyEC,UAAzE,CAAoFC,aAApF,CAAkGC,SAAlG,CAA4GC,cAA5G,CAA2HC,qBAA3H,CAAiJC,gBAAjJ,CAAkKC,cAAlK,KACO,qDADP,CAEA,OAASC,cAAT,CAAyBC,cAAzB,KAA+C,gBAA/C,CACA,MAAOC,MAAP,KAAkB,OAAlB,CACA,MAAOC,KAAP,KAAiB,SAAjB,CACA,MAAOC,QAAP,KAAoB,WAApB,CACA,MAAOC,eAAP,KAA2B,kBAA3B,C,6IAEA,GAAMC,KAAI,CAAG,QAAPA,KAAO,EAAM,CACjB,GAAMC,OAAM,CAAG,kCAAf,CACA,GAAMC,WAAU,CAAGR,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAN,CAAaF,UAAxB,EAAD,CAAjC,CACA,GAAMG,QAAO,CAAGX,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAN,CAAaC,OAAxB,EAAD,CAA9B,CACA,GAAMC,YAAW,CAAGZ,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAN,CAAaE,WAAxB,EAAD,CAAlC,CACA,GAAMC,QAAO,CAAGb,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAN,CAAaG,OAAxB,EAAD,CAA9B,CACA,oBAAoCb,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAjB,EAAD,CAAlD,CAAqBI,UAArB,iBAAQC,WAAR,CACA,GAAMC,YAAW,4FAAG,kKAEhBC,UAAU,CAACvB,aAAa,CAAC,IAAD,CAAd,CAAV,CAFgB,sBAGAQ,MAAK,CAACgB,GAAN,6DACuCC,WADvC,mBAC4DZ,MAD5D,EAHA,QAGZa,GAHY,qCAMgBA,IAAG,CAACC,IANpB,QAMVA,IANU,eAOhBJ,UAAU,CAACxB,UAAU,CAAC,IAAD,CAAX,CAAV,CACAwB,UAAU,CAAC1B,cAAc,CAAC,KAAD,CAAf,CAAV,CACA+B,OAAO,CAACC,GAAR,CAAYF,IAAZ,EACAJ,UAAU,CAACnB,gBAAgB,CAACuB,IAAI,CAACG,OAAL,CAAa,CAAb,EAAgBC,IAAjB,CAAjB,CAAV,CACAR,UAAU,CAACpB,qBAAqB,CAACwB,IAAI,CAACG,OAAL,CAAa,CAAb,EAAgBE,WAAjB,CAAtB,CAAV,CACAT,UAAU,CAAClB,cAAc,CAACsB,IAAI,CAACG,OAAL,CAAa,CAAb,EAAgBG,IAAjB,CAAf,CAAV,CACAV,UAAU,CAAC3B,WAAW,CAAC+B,IAAI,CAACO,IAAN,CAAZ,CAAV,CACAX,UAAU,CAACrB,cAAc,CAACyB,IAAI,CAACM,IAAL,CAAUE,IAAX,CAAf,CAAV,CAdgB,iFAgBhBP,OAAO,CAACQ,IAAR,cACAb,UAAU,CAACvB,aAAa,CAAC,KAAD,CAAd,CAAV,CACAuB,UAAU,CAACxB,UAAU,CAAC,KAAD,CAAX,CAAV,CAlBgB,qEAAH,kBAAXuB,YAAW,0CAAjB,CAsBA,GAAMC,WAAU,CAAGhB,cAAc,EAAjC,CACA,GAAM8B,SAAQ,CAAG/B,cAAc,CAAC,SAACS,KAAD,QAAWA,MAAK,CAACC,MAAN,CAAaqB,QAAxB,EAAD,CAA/B,CACA,GAAMZ,YAAW,CAAGnB,cAAc,CAACZ,cAAD,CAAlC,CACA,GAAM4C,aAAY,CAAG,QAAfA,aAAe,CAACC,CAAD,CAA4C,CAC/DhB,UAAU,CAACtB,SAAS,CAACsC,CAAC,CAACC,MAAF,CAASC,KAAV,CAAV,CAAV,CACD,CAFD,CAGA,GAAMC,YAAW,CAAG,QAAdA,YAAc,CAACf,IAAD,CAAe,CACjC,GAAIgB,KAAI,CAAGhB,IAAI,CAACiB,GAAL,CAAS,SAACC,IAAD,CAAe,CACjC,MAAOA,KAAI,CAACX,IAAZ,CACD,CAFU,CAAX,CAIAX,UAAU,CAAC5B,WAAW,CAACgD,IAAD,CAAZ,CAAV,CACD,CAND,CAQAvD,SAAS,CAAC,UAAM,CACdsD,WAAW,CAAClD,QAAD,CAAX,CACA,GAAI0B,WAAW,CAAC4B,MAAZ,CAAqB,CAAzB,CAA4B,CAC1BvB,UAAU,CAACzB,UAAU,CAAC,KAAD,CAAX,CAAV,CACD,CAFD,IAEO,CACLyB,UAAU,CAACzB,UAAU,CAAC,IAAD,CAAX,CAAV,CACD,CACH;AACC,CARQ,CAQN,EARM,CAAT,CAUAV,SAAS,CAAC,UAAM,CACd,GAAIqC,WAAW,GAAK,EAApB,CAAwB,CACtBF,UAAU,CAACvB,aAAa,CAAC,KAAD,CAAd,CAAV,CACAuB,UAAU,CAACxB,UAAU,CAAC,KAAD,CAAX,CAAV,CACD,CACD,GAAImB,WAAW,CAAC4B,MAAZ,CAAqB,CAAzB,CAA4B,CAC1BvB,UAAU,CAACzB,UAAU,CAAC,KAAD,CAAX,CAAV,CACD,CAFD,IAEO,CACLyB,UAAU,CAACzB,UAAU,CAAC,IAAD,CAAX,CAAV,CACD,CACH;AACC,CAXQ,CAWN,CAAC2B,WAAD,CAAclB,cAAd,CAXM,CAAT,CAYA,mBACE,wCACE,KAAC,MAAD,IADF,cAEE,aAAK,SAAS,CAAEd,MAAM,CAACsD,SAAvB,CAAkC,cAAY,MAA9C,wBACE,aAAK,SAAS,CAAEtD,MAAM,CAACuD,WAAvB,wBACE,MAAC,UAAD,EAAY,SAAS,gBAAUvD,MAAM,CAACwD,SAAjB,CAArB,wBACE,KAAC,IAAD,CAAM,OAAN,EACE,cAAY,YADd,CAEE,IAAI,CAAC,MAFP,CAGE,IAAI,CAAC,QAHP,CAIE,YAAY,CAAC,KAJf,CAKE,KAAK,CAAExB,WALT,CAME,QAAQ,CAAEa,YANZ,CAOE,WAAW,CAAC,iBAPd,CAQE,SAAS,CAAE7C,MAAM,CAACyD,KARpB,EADF,cAWE,KAAC,UAAD,CAAY,IAAZ,EAAiB,SAAS,CAAEzD,MAAM,CAAC0D,WAAnC,CAAgD,EAAE,CAAC,cAAnD,uBACE,eAAQ,SAAS,CAAE1D,MAAM,CAAC2D,aAA1B,CAAyC,OAAO,CAAE9B,WAAlD,CAA+D,cAAY,YAA3E,gBADF,EAXF,GADF,CAkBGG,WAAW,CAACqB,MAAZ,CAAqB,CAArB,eACC,YAAK,SAAS,CAAErD,MAAM,CAAC4D,WAAvB,UACGhB,QAAQ,CACNiB,MADF,CACS,SAACpB,IAAD,CAAkB,CACxB,MAAOA,KAAI,CAACqB,iBAAL,GAAyBC,QAAzB,CAAkC/B,WAAW,CAAC8B,iBAAZ,EAAlC,CAAP,CACD,CAHF,EAIEX,GAJF,CAIM,SAACC,IAAD,CAAeY,KAAf,CAAiC,CACpC,mBACE,YACE,SAAS,CAAEhE,MAAM,CAACiE,IADpB,CAGE,OAAO,CAAE,yBAAMnC,WAAU,CAACtB,SAAS,CAAC4C,IAAD,CAAV,CAAhB,EAHX,UAKGA,IALH,EAEOY,KAFP,CADF,CASD,CAdF,EAeEE,KAfF,CAeQ,CAfR,CAeW,CAfX,CADH,EAnBJ,GADF,CAwCG1C,OAAO,EAAI,CAACH,UAAZ,EAA0B,CAACK,OAAD,GAAa,IAAvC,eACC,YAAK,SAAS,CAAE1B,MAAM,CAACmE,cAAvB,uBACE,KAAC,cAAD,IADF,EAzCJ,CA6CG9C,UAAU,EAAIK,OAAO,GAAK,IAA1B,eACC,YAAK,SAAS,CAAE1B,MAAM,CAACoE,YAAvB,uBACE,KAAC,IAAD,EACE,MAAM,CAAEzC,UAAU,CAACU,OAAX,CAAmB,CAAnB,EAAsBC,IADhC,CAEE,WAAW,CAAEX,UAAU,CAACU,OAAX,CAAmB,CAAnB,EAAsBG,IAFrC,CAGE,kBAAkB,CAAEb,UAAU,CAACU,OAAX,CAAmB,CAAnB,EAAsBE,WAH5C,CAIE,IAAI,CAAEZ,UAAU,CAACc,IAJnB,CAKE,IAAI,CAAEd,UAAU,CAACa,IAAX,CAAgBE,IALxB,EADF,EA9CJ,CAwDG,CAAClB,OAAD,EAAY,CAACH,UAAb,EAA2B,CAACK,OAAD,GAAa,IAAxC,eACC,YAAK,SAAS,CAAE1B,MAAM,CAACqE,QAAvB,uBACE,KAAC,OAAD,EAAS,WAAW,CAAE5C,WAAtB,EADF,EAzDJ,GAFF,GADF,CAmED,CApID,CAsIA,cAAeN,KAAf"},"metadata":{},"sourceType":"module"}